<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>

<div th:insert="fragments/general.html :: menu" ></div>



<div style="text-align: center;">Detalles del pedido:</div>


<div>detalles de envio</div>
nombre completo: <span th:text="${pedido.nombreCompleto}"></span><br>
direccion: <span th:text="${pedido.direccion}"></span><br>
provincia: <span th:text="${pedido.provincia}"></span><br>

<br>

<div>datos de pago:</div>
tipo de tarjeta: <span th:text="${pedido.tipoTarjeta}"></span><br>
titular: <span th:text="${pedido.titularTarjeta}"></span><br>
numero de tarjeta: <span th:text="${pedido.numeroTarjeta}"></span><br>

<br>

<div>productos del pedido:</div>

<div th:each="productoPedido: ${pedido.productosPedido}" style="margin: 15px">
	titulo: <span th:text="${productoPedido.libro.titulo}"></span><br>
	precio/unidad: <span th:text="${productoPedido.libro.precio}"></span><br>
	cantidad: <span th:text="${productoPedido.cantidad}"></span><br>
</div>

<input type="hidden" id="id_pedido" th:field="${pedido.id}" />

<div style="text-align: center;margin: 15px">estado del pedido:</div>
<select id="select_estado" th:field="${pedido.estado}">
	<option th:each="e : ${estados}" th:text="${e.value}" th:value="${e.key}" />
</select>

<script src="../librerias_js/jquery.js"></script>
<script>
	$("#select_estado").change(function(e){
		let estado = $("#select_estado").find(":selected").val()
		let idPedido = $("#id_pedido").val()
		alert( "asignar estado: " + estado + " a la id de pedido: " + idPedido )
		$.post("pedidosREST/actualizarEstadoPedido",{
			id: idPedido,
			estado: estado
		}).done(function(res){
			alert(res)
		})
	})
</script>


</body>
</html>










